<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/src/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>D3 Gauge App</title>
    <script type="module" src="/src/d3-gauge.ts"></script>
  </head>
  <body>
    <d3-gauge id="gaugeBox"
              title="Perf"
              gaugeRadius="160"
              minVal="0"
              maxVal="120"
              zeroTickAngle="50"
              maxTickAngle="310"
              needleVal="30"
              tickSpaceMinVal="5"
              tickSpaceMajVal="10"
              edgeWidth="0.02"
              tickEdgeGap="0.08"
              outerEdgeCol="#000"
              tickColMaj="#000"
              needleCol="#000"
              unitsFont="#000"
              unitsOffset="-40"
              fractionDigits="1"
              gaugeUnits="%"
              ranges="[[25,50,&quot;red&quot;],
                       [50,70,&quot;orange&quot;],
                       [70,100,&quot;green&quot;]]"
    >
    </d3-gauge>

    <script>
      function update(last) {
        var newValue = Math.min(110, Math.max(-10, last + Math.round(Math.random()*20-10)));
        document.getElementById("gaugeBox").needleVal = newValue;
        setTimeout(function(){ update(newValue) }, 1000);
      }

      update(30);

    </script>
  </body>
</html>
